load-basics()

empty = #<>
len = Cn[Get, #0, !0]
setlen = Cn[Set, #0, !0, !1]
ent = Cn[Get, Cn[S, !0], !1]
setent = Cn[Set, Cn[S, !0], !1, !2]
append = Cn[setent, len, !1, Cn[setlen, Cn[S, len], !0]]

mapent = Cn[setent, !0, Cn[@0, Cn[ent, !0, !1]], !1]
map = Cn[Pr[!0, Cn[mapent[@0], !1, !0]], len, !0]

concat = Cn[Pr[!0, Cn[append, !0, Cn[ent, !1, !3]]], Cn[len, !1], !0, !1]

